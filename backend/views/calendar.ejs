<% layout('layout') %>

<div class="container mt-5">
    <div class="text-center">
        <h1>Welcome, <%= userInfo.email %>!</h1>
        <a href="/user/logout" class="btn btn-danger mb-4">Logout</a>
    </div>
    <div class="card">
        <div class="card-body">
            <h2 class="card-title">Your Current Calendar</h2>
            <ul class="list-group list-group-flush">
                <% if (events && events.length > 0) { %>
                    <% events.forEach(event => { %>
                        <li class="list-group-item">
                            <% if (event.start.date && event.end.date) { %>
                                <%= event.start.date %> - <%= event.end.date %>: <%= event.summary %>
                            <% } else { %>
                                <%= event.start.dateTime %> - <%= event.end.dateTime %>: <%= event.summary %>
                            <% } %>
                        </li>
                    <% }); %>
                <% } else { %>
                    <li class="list-group-item">No events found.</li>
                <% } %>
            </ul>
            <form action="/calendar/schedule" method="post" class="mt-4">
                <button type="submit" class="btn btn-primary">Plan Meals</button>
            </form>
        </div>
    </div>
</div>
